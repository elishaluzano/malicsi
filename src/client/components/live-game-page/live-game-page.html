

<div class = "row">
  <div class = "col s12 m12 l12"  id = "score-bg">
    <div>

      <br>

      <div class="col s4 center hide-on-small-only">
        <a class="pointer" ui-sref="teamPage({ teamId: $ctrl.teamsInGame[0].team_id })"><img style="height: 200px; width: 200px;" class="circle responsive-img team-img" ng-src="{{ $ctrl.teamsInGame[0].picture }}"></a>
        <a class="white-text pointer Cool-font" ui-sref="teamPage({ teamId: $ctrl.teamsInGame[0].team_id })"><h4>{{$ctrl.teamsInGame[0].name}}</h4></a>
        <h3 class="white-text ">{{$ctrl.teamsInGame[0].score}}</h3>
      </div>


      <div class="col s4 center">
        <h1 style="word-wrap: break-word;" class="white-text Cool-font">{{$ctrl.game.sport}}</h1>
        <a ui-sref="eventPage({eventId: $ctrl.game.event_id})" style="word-wrap: break-word;" class="white-text">{{$ctrl.game.event}}</a>
        <br>
        <a ui-sref="sponsorPage({sponsorId: $ctrl.game.institution_id})" style="word-wrap: break-word;" class="white-text">{{$ctrl.game.institution}}</a>
      </div>


      <div class="col s4 center hide-on-small-only">
        <a class="pointer" ui-sref="teamPage({ teamId: $ctrl.teamsInGame[1].team_id })"><img style="height: 200px; width: 200px;" class="circle responsive-img team-img" ng-src="{{ $ctrl.teamsInGame[1].picture }}"></a>
        <a class="white-text pointer Cool-font" ui-sref="teamPage({ teamId: $ctrl.teamsInGame[1].team_id })"><h4>{{$ctrl.teamsInGame[1].name}}</h4></a>
        <h3 class="white-text ">{{$ctrl.teamsInGame[1].score}}</h3>
      </div>



      <!-- 
      
      <div ng-repeat="team in $ctrl.teamsInGame" class="col s5 center hide-on-large-only">
        <a class="pointer" ui-sref="teamPage({ teamId: team.team_id })"><img style="height: 100px; width: 100px;" class="circle responsive-img team-img" ng-src="{{ team.picture }}"></a>
        <a class="white-text pointer Cool-font" ui-sref="teamPage({ teamId: team.team_id })"><h4>{{team.name}}</h4></a>
        <h3 class="white-text">{{team.score}}</h3>
      </div>
      
       -->
       <!--  <a class="modal-trigger" href="#edit-score">
          <div class = "chip orange white-text">Update Score</div>
        </a> -->
      </div>
    </div>
  </div>

  <div class="row">
    <span class = "Cool-font center"><h4>Play-by-play</h4></span>
    <div class = "container">
    <div id="test2" class="col s12 l12">
      <div style = "padding-left:10px; padding-right: 10px; max-height:300px;height:300px;overflow-y:scroll;background-color:#f4f4f4;">
        <br>
        <div class="center" ng-if="$ctrl.scores.length == 0"><h5 class="Cool-font">No record yet</h5></div>
        <div ng-repeat="score in $ctrl.scores" ng-class = "(score.teamVal % 2) == 0 ? 'left' : 'right'" style="width:100%"><span ng-class = "(score.teamVal % 2) == 0 ? 'left' : 'right'"><div ng-class = "(score.teamVal % 2) == 0 ? 'purple darken-2' : 'orange'" class = "chip white-text">{{score.name}} scores {{score.score}} points</div>

        <a href="" modal data-target="delete-history" ng-click="$ctrl.getIdDel(score.team_id, score.game_id, score.gameUpdateLog_id, score.score)" ng-if="($ctrl.isAdmin || $ctrl.isOverallAdmin) && $ctrl.game.status == 'ONGOING'"><i class = "grey-text material-icons" style = "top:5px;position:relative;">delete</i></a>

        <a href="" modal data-target="edit-history" ng-click="$ctrl.getId(score.gameUpdateLog_id, score.score, score.team_id, score.name)" ng-if="($ctrl.isAdmin || $ctrl.isOverallAdmin) && $ctrl.game.status == 'ONGOING'"><i class = "grey-text material-icons" style = "top:5px;position:relative;">edit</i></a>

        <p class = "center-align grey-text" style ="margin-top:0em;">{{score.time | date: "MM-dd-yyyy hh:mm a"}}</p></span>
        </div> 

      </div>
      <div class = "container">
      <br>
      <a class = "btn orange-bordered orange-text right add-margin-right add-margin-top" data-target="end-game" href="" modal ng-if="($ctrl.isAdmin || $ctrl.isOverallAdmin) && $ctrl.game.status == 'ONGOING'">Close Game</a>
      <a class = "btn orange white-text right add-margin-right add-margin-top" data-target="update-history-modal" href="" modal ng-if="($ctrl.isAdmin || $ctrl.isOverallAdmin) && $ctrl.game.status == 'ONGOING'">Add score</a>
      <a class = "btn orange-bordered orange-text right add-margin-right add-margin-top" data-target="open-game" href="" modal ng-if="($ctrl.isAdmin || $ctrl.isOverallAdmin) && $ctrl.game.status == 'FINISHED'">Open Game</a>
     </div>
    </div>
    
       
  </div>
  </div>

<!-- update-history-modal -->
<div id="update-history-modal" class="modal">
  <div class="modal-content">
    <h5>Update history</h5>
    <div class="divider"></div>
    <div class = "container">
      <form>
        <br>

        <div class = "row">
          <div class = "col s12 l12">
            <div input-field>
              <select class="icons" ng-model="$ctrl.teamToBeUpdated" material-select watch>

                <option value="" disabled selected>Select Team</option>

                <option ng-repeat="team in $ctrl.teamsInGame" ng-value="team.team_id" data-icon="{{team.picture}}">{{team.name}}</option>
              </select>

              <label>Team Select</label>
            </div>
            <div class ="input-field">
              <input id = "icon_prefix" type = "number" placeholder="" ng-model="$ctrl.score" >
            </div>
          </div>
        </div>
        <div class="center">
        <button ng-click="$ctrl.addLog()" class = "btn green add-margin-bottom white-text modal-action modal-close">Update</button>
        <button ng-click="$ctrl.reset()" class = "btn btn-flat add-margin-bottom modal-action modal-close">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Edit history log -->
<div id="edit-history" class="modal">
    <div class="modal-content">
      <h5>Edit History</h5>
      <div class="divider"></div>
      <div class = "container">
        <form>
        <br>
        <div class = "row">
          <div class = "col s12 l12">
            <div input-field>
              <select class="browser-default" ng-model="$ctrl.teamToBeEdited">

                <option ng-selected="$ctrl.teamEdit == team.name" ng-repeat="team in $ctrl.teamsInGame" ng-value="team.team_id">{{team.name}}</option>

              </select>

            </div>
            <div class ="input-field">
              <input id = "icon_prefix" type = "number" placeholder="" ng-model="$ctrl.scoreUpdate" >
            </div>
          </div>
        </div>
        <div class="center">
        <button ng-click="$ctrl.editLog()" class = "btn green white-text add-margin-bottom modal-action modal-close">Submit</button>
        <button ng-click="$ctrl.reset()" class = "btn btn-flat modal-action modal-close add-margin-bottom ">Cancel</button>
        </div>
      </form>
      </div>
    </div>
  </div>

<!-- Delete history log -->

<div id="delete-history" class="modal">
    <div class="modal-content">
      <h5>Delete history</h5>
      <div class="divider"></div>
        <p>Are you sure you want to delete this history log?</p>
          <div class="center">
          <!-- <input type ="submit" value = "Submit" class = " right modal-action modal-close"> -->
          <a class = "btn white-text green modal-action modal-close add-margin-bottom" value = "submit" type = "submit" ng-click="$ctrl.deleteLog($ctrl.idToBeChanged)">Delete</a>

          <a class = "btn btn-flat modal-action modal-close add-margin-bottom" value = "submit" type = "submit">Cancel</a>
          </div>

      </div>
    </div>
  </div>


<!-- End game -->

<div id="end-game" class="modal">
    <div class="modal-content">
      <h5>End Game</h5>
      <div class="divider"></div>
        <p>Are you sure you want to close this game?</p>
        <p>All edits and deletions will be disabled.</p>

        <br><br><br>
          <div class="center">
          <!-- <input type ="submit" value = "Submit" class = " right modal-action modal-close"> -->
          <a class = "btn white-text green add-margin-bottom modal-action modal-close" value = "submit" type = "submit" ng-click="$ctrl.endGame()">Confirm</a>
          <a class = "btn btn-flat add-margin-bottom modal-action modal-close" value = "submit" type = "submit">Cancel</a>
          </div>

      </div>
</div>

<!-- Open game -->

<div id="open-game" class="modal">
    <div class="modal-content">
      <h5>End Game</h5>
      <div class="divider"></div>
        <p>Are you sure you want to re-open this game?</p>

        <br><br><br>
          <div class="center">
          <!-- <input type ="submit" value = "Submit" class = " right modal-action modal-close"> -->
          <a class = "btn green white-text add-margin-bottom modal-action modal-close" value = "submit" type = "submit" ng-click="$ctrl.openGame()">Open</a>
          <a class = "btn btn-flat add-margin-bottom modal-action modal-close" value = "submit" type = "submit">Cancel</a>
          </div>

      </div>
</div>